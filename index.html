<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="apple-touch-icon" href="launch.png">
  <link rel="apple-touch-startup-image" href="launch.png">
  <meta name="apple-mobile-web-app-title" content="Korero">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
</head>
<body>
  <audio id="steam" src="steam.mp3"></audio>
  <audio id="seagull" src="seagull.mp3"></audio>
  <button id="start" class="button">start</button><br>
  <button id="ee" class="button">steam engine</button><br>
  <button id="oo" class="button">seagull</button><br>
  <input type="range" min="0" max="2" value="1" step="0.1" id="steamGainNodeSlider">
  <br>
  <input type="range" min="-1" max="+1" value="0" step="0.1" id="steamPannerNodeSlider1">
  <input type="range" min="-1" max="1" value="0" step="0.1" id="steamPannerNodeSlider1">


  <script>

  var   audioCtx ;

  start = () => {
    audioCtx = new AudioContext || window.webkitAudioContext;


    steamSound=new Sound("steam","steam.mp3");

    console.log(steamSound.fileName);
  /*  steamAudioElement = document.getElementById("steam");
    steamTrack = audioCtx.createMediaElementSource(steamAudioElement);
    steamGainNode = audioCtx.createGain();
 pannerOptions = {
      pan: 0
    };
    steamPanner = new StereoPannerNode(audioCtx, pannerOptions);

    steamPanner=audioCtx.createStereoPanner();
    */
    seagullAudioElement = document.getElementById("seagull");
    seagullTrack = audioCtx.createMediaElementSource(seagullAudioElement);
  }

  class Sound {
    constructor (name,fileName) {
      this.name=name;
      this.fileName=fileName;
      this.audioElement = document.getElementById(name);
     this.track = audioCtx.createMediaElementSource(this.audioElement);
      this.gainNode = audioCtx.createGain();
      this.panner=audioCtx.createStereoPanner();
    }
    play(){
      this.track.connect(this.gainNode).connect(this.panner).connect(audioCtx.destination);
      this.audioElement.play();
    }
  }


    steam = 0;
    steamGainNode = 0;
    steamGainNodeSlider = document.getElementById("steamGainNodeSlider");
    steamPannerNodeSlider = document.getElementById("steamPannerNodeSlider1");



    playSound = (sound) => {
      //gainNode = audioCtx.createGain();
    //  track.connect(gainNode).connect(pannerNode).connect(audioCtx.destination);
    //  audioElement.play();
    sound.play();
    }
    document.getElementById("start").addEventListener("click", () => {
      start();
    });
    document.getElementById("ee").addEventListener("click", () => {
      playSound(steamSound);
    });
    document.getElementById("oo").addEventListener("click", () => {
      playSound(seagullTrack, seagullAudioElement, seagullGainNode, seagullPannerNode);
    });
    steamGainNodeSlider.oninput = function() {
      steamGainNode.gain.value = this.value;
    }
    steamPannerNodeSlider.oninput = function() {
      steamPanner.pan.value = steamPannerNodeSlider.value;
    }
  </script>

  v23
</body>

</html>
